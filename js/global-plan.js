window.addEventListener("DOMContentLoaded",()=>{const dataPlan=localStorage.getItem("plan");if(dataPlan){let planObject=JSON.parse(dataPlan);if(planObject&&planObject.step2&&planObject.step2.url){var setStep2Quantity=function(){planObject={...planObject,step2:{...planObject.step2,quantity:$quantityInput.val()}},localStorage.setItem("plan",JSON.stringify(planObject))};$('a[href="/pages/get-started"]:not([data-step="1"])').attr("href",planObject.step2.url),$('a[data-step="2"]').attr("href",planObject.step2.url);const $increaseQtyButton=$(".dd_product_details .dd_product_select .increase_qty"),$decreaseQtyButton=$(".dd_product_details .dd_product_select .decrease_qty"),$quantityInput=$(".dd_product_details .dd_product_select .quantity__input");$('.dd_product_details .dd_form_inputs .dd_product_select_label input[name="id"]').on("click",function(event){planObject={...planObject,step2:{...planObject.step2,delivery_date:$(this).val()}},localStorage.setItem("plan",JSON.stringify(planObject))});const sellingPlanInt=setInterval(function(){$('.dd_product_details select[name="selling_plan"]').length>0&&(setTimeout(function(){$('.dd_product_details select[name="selling_plan"]').on("change",function(event){planObject={...planObject,step2:{...planObject.step2,selling_plan:$(this).val()}},localStorage.setItem("plan",JSON.stringify(planObject))}),planObject.step2.selling_plan&&$('.dd_product_details select[name="selling_plan"]').val(planObject.step2.selling_plan)},100),clearInterval(sellingPlanInt))},100);planObject.step2.delivery_date&&$('.dd_product_details .dd_form_inputs .dd_product_select_label input[name="id"][value="'+planObject.step2.delivery_date+'"]').prop("checked",!0)}}console.log("dataPlan",dataPlan);let sidePlanSelect=document.querySelector(".side-plan-select"),sidePlan=document.querySelector(".side-plan__plan");sidePlanSelect&&sidePlanSelect.addEventListener("change",function(event){event.target.value=="subscription"?sidePlan.removeAttribute("disabled"):sidePlan.setAttribute("disabled","disabled")});let addToCart=document.querySelector(".atc-btn");addToCart&&addToCart.addEventListener("click",function(event){event.preventDefault();let body={id:addToCart.dataset.variant,quantity:1};sidePlan.hasAttribute("disabled")||(body.selling_plan=sidePlan.value),fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(body)}).then(function(response){return response.json()}).then(function(data){window.location.href="/cart"})});let isCustomFlow=localStorage.getItem("custom_flow"),excludedRoutes=["/products/gift-delivery","/products/occasional-dabba","/products/dabbadrop-one-off"]});
//# sourceMappingURL=/cdn/shop/t/68/assets/global-plan.js.map?v=38366069096142186261729078641
